{% ckan_extends %}
{% block styles %}
    {{ super() }}

    {% asset 'wprdctheme/wprdc_theme-css' %}
    {% asset 'wprdctheme/wprdc_theme_popover-js' %}

{% endblock %}

{% block bodytag %} style="visibility: hidden"{% endblock %}

{% block body_extras %}
    {{ super() }}
    <script>
        let domReady = (cb) => {
            document.readyState === 'interactive' || document.readyState === 'complete'
                ? cb()
                : document.addEventListener('DOMContentLoaded', cb);
        };

        domReady(() => {
            // Display body when DOM is loaded
            document.body.style.visibility = 'visible';
        });
    </script>

    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function () {
            var u = "//analytics.wprdc.org/";
            _paq.push(['setTrackerUrl', u + 'matomo.php']);
            _paq.push(['setSiteId', '1']);
            var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
            g.async = true;
            g.src = u + 'matomo.js';
            s.parentNode.insertBefore(g, s);
        })();
    </script>
    <!-- End Matomo Code -->

    {% snippet "snippets/terms-modal.html" %}
    <noscript>
        <style>
            body {
                visibility: visible !important;
            }
        </style>
    </noscript>
{% endblock %}

{% block scripts %}
    <script>let FF_FOUC_FIX;</script>
{% endblock %}

